<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MiniLend â€” Demo UI</title>
    <link rel="icon" href="data:;base64,=" />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="container">
      <header>
        <div class="logo">ML</div>
        <div>
          <h1>MiniLend â€” Demo UI</h1>
          <p class="lead">
            A minimal frontend to interact with your MiniLend smart contracts
            (stake, borrow, repay, withdraw).
          </p>
        </div>
      </header>

      <!-- MetaMask Popup Modal -->
      <div id="walletModal" class="modal">
        <div class="modal-content">
          <h2>No Wallet Detected ðŸš¨</h2>
          <p id="walletMessage">You need MetaMask to use this DApp.</p>

          <button id="installBtn">Install MetaMask</button>
          <label>
            <input type="checkbox" id="dontShow" /> Don't show again
          </label>

          <button id="closeBtn" class="close">Close</button>
        </div>
      </div>

      <div class="grid">
        <!-- Left column: actions & status -->
        <div>
          <div class="card">
            <div
              class="row"
              style="
                justify-content: space-between;
                align-items: center;
                margin-bottom: 12px;
              "
            >
              <div>
                <div class="muted">Wallet</div>
                <div id="account">Not connected</div>
              </div>
              <div>
                <button id="connectBtn">Connect Wallet</button>
              </div>
            </div>

            <section style="margin-bottom: 12px">
              <label>Stake ETH (send with transaction value)</label>
              <div class="row">
                <input
                  id="stakeInput"
                  type="number"
                  placeholder="Amount in ETH (e.g. 0.1)"
                  step="0.0001"
                />
                <button id="stakeBtn">Stake</button>
              </div>
              <div class="muted" style="margin-top: 8px">
                Tip: In Remix tests, set transaction value when calling stake
                function.
              </div>
            </section>

            <section style="margin-bottom: 12px">
              <label
                >Borrow USDT (amount in token smallest unit shown in UI)</label
              >
              <div class="row">
                <input
                  id="borrowInput"
                  type="number"
                  placeholder="Amount (e.g. 100)"
                />
                <button id="borrowBtn">Borrow</button>
              </div>
            </section>

            <section style="margin-bottom: 12px">
              <label>Repay USDT</label>
              <div class="row">
                <input id="repayInput" type="number" placeholder="Amount" />
                <button id="approveBtn" class="secondary">Approve</button>
                <button id="repayBtn">Repay</button>
              </div>
              <div class="muted" style="margin-top: 8px">
                Remember: call approve() on token before repay (approve allows
                contract to pull tokens).
              </div>
            </section>

            <section>
              <label>Withdraw ETH Collateral</label>
              <div class="row">
                <input
                  id="withdrawInput"
                  type="number"
                  placeholder="Amount in ETH"
                />
                <button id="withdrawBtn">Withdraw</button>
              </div>
            </section>
          </div>

          <div class="card" style="margin-top: 12px">
            <h3 style="margin: 0 0 8px 0">Account Stats</h3>
            <div class="row" style="gap: 12px">
              <div class="stat">
                <div class="muted">Staked ETH</div>
                <div id="stakedEth">-</div>
              </div>
              <div class="stat">
                <div class="muted">Borrowed USDT</div>
                <div id="borrowedUsd">-</div>
              </div>
              <div class="stat">
                <div class="muted">Available to borrow</div>
                <div id="availableBorrow">-</div>
              </div>
            </div>

            <div style="margin-top: 12px">
              <div class="muted">Contract Balances</div>
              <div>MockUSDT: <span id="contractUsdt">-</span></div>
              <div>ETH (this contract): <span id="contractEth">-</span></div>
            </div>
          </div>
        </div>

        <!-- Right column: quick config & logs -->
        <div>
          <div class="card">
            <label>Config</label>
            <div style="margin-bottom: 8px">MiniLend Contract Address</div>
            <input id="miniLendAddress" type="text" placeholder="0x..." />
            <div style="margin-top: 8px">MockUSDT Contract Address</div>
            <input id="tokenAddress" type="text" placeholder="0x..." />

            <div style="margin-top: 12px" class="row">
              <button id="loadBtn" class="secondary">Load Contracts</button>
            </div>
          </div>

          <div class="card" style="margin-top: 12px">
            <label>Quick Logs</label>
            <pre id="log">
UI ready. Enter contract addresses and connect wallet.</pre
            >
          </div>
        </div>
      </div>

      <footer>
        Replace the contract ABI and addresses in the script below before using
        on a live network.
      </footer>
    </div>

    <!-- Popup Message -->
    <div id="popup" class="popup hidden">
      <div class="popup-content">
        <span id="popupMessage"></span>
        <button id="popupClose">OK</button>
      </div>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
